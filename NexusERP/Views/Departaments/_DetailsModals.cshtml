@model DepartamentoDetailsViewModel

<!-- Modal: Añadir Empleado -->
<div class="modal fade" id="modal-add-employee" tabindex="-1" aria-labelledby="modalAddEmpLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 1rem;">

            <div class="modal-header border-bottom-0 pb-0">
                <h5 class="modal-title fw-bold text-dark" id="modalAddEmpLabel">Añadir Empleado a @Model.Nombre</h5>
                <button type="button" class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body p-4">
                <form asp-controller="Empleados" asp-action="Create" method="post">
                    <input type="hidden" name="DepartamentoId" value="@Model.Id" /> <h6 class="fw-bold text-secondary-custom mb-3 border-bottom pb-2">Datos Personales</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Nombre *</label>
                            <input type="text" name="Nombre" class="form-control shadow-none" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Apellidos *</label>
                            <input type="text" name="Apellidos" class="form-control shadow-none" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">DNI *</label>
                            <input type="text" name="DNI" class="form-control shadow-none" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Email Corporativo</label>
                            <input type="email" name="EmailCorporativo" class="form-control shadow-none">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Teléfono</label>
                            <input type="tel" name="Telefono" class="form-control shadow-none">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">F. Nacimiento *</label>
                            <input type="date" name="FechaNacimiento" class="form-control shadow-none" required>
                        </div>
                    </div>

                    <h6 class="fw-bold text-secondary-custom mb-3 border-bottom pb-2">Datos Laborales y Económicos</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Nº Seguridad Social *</label>
                            <input type="text" name="NumSeguridadSocial" class="form-control shadow-none" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Fecha de Alta *</label>
                            <input type="date" name="FechaAntiguedad" class="form-control shadow-none" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Grupo Cotización (1-11) *</label>
                            <input type="number" name="GrupoCotizacion" min="1" max="11" class="form-control shadow-none" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Salario Anual (€) *</label>
                            <input type="number" name="SalarioBrutoAnual" step="0.01" class="form-control shadow-none" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">IBAN</label>
                            <input type="text" name="IBAN" class="form-control shadow-none">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Estado</label>
                            <select name="Activo" class="form-select shadow-none">
                                <option value="1">Activo</option>
                                <option value="0">Inactivo</option>
                            </select>
                        </div>
                    </div>

                    <h6 class="fw-bold text-secondary-custom mb-3 border-bottom pb-2">Datos para IRPF</h6>
                    <div class="row g-3 mb-4">
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Estado Civil *</label>
                            <select name="EstadoCivil" class="form-select shadow-none" required>
                                <option value="1">Soltero/a</option>
                                <option value="2">Casado/a</option>
                                <option value="3">Divorciado/a</option>
                                <option value="4">Viudo/a</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">Nº Hijos</label>
                            <input type="number" name="NumeroHijos" value="0" min="0" class="form-control shadow-none">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-medium text-muted">% Discapacidad</label>
                            <input type="number" name="PorcentajeDiscapacidad" value="0" min="0" max="100" class="form-control shadow-none">
                        </div>
                    </div>

                    <div class="d-flex justify-content-end gap-2 border-top pt-3 mt-4">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary-custom">Guardar Empleado</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Importar CSV -->
<div class="modal fade" id="modal-import-csv" tabindex="-1" aria-labelledby="modalImportCsvLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 500px;">
        <div class="modal-content border-0 shadow-lg" style="border-radius: 1rem;">

            <div class="modal-header border-bottom-0 pb-0">
                <h5 class="modal-title fw-bold text-dark" id="modalImportCsvLabel">Importar Empleados</h5>
                <button type="button" class="btn-close shadow-none" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body p-4">
                <div class="alert bg-secondary-light border-0 text-dark small mb-4" style="background-color: #f8fafc; border-radius: 0.5rem; padding: 1rem;">
                    <strong>Departamento:</strong> @Model.Nombre <br />
                    El CSV debe contener: nombre, email, posicion, salario, fecha_alta
                </div>

                <form asp-controller="Empleados" asp-action="ImportCsv" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="DepartamentoId" value="@Model.Id" />

                    <div class="upload-zone mb-4 text-center p-4" style="border: 2px dashed #cbd5e1; border-radius: 0.5rem; transition: border-color 0.2s;">
                        <svg style="width: 48px; height: 48px; color: #9ca3af;" class="mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                        </svg>
                        <p class="text-muted small mb-3">Arrastra un CSV o haz clic para seleccionar</p>
                        <input type="file" name="file" class="form-control shadow-none" accept=".csv" required>
                    </div>

                    <div class="d-flex justify-content-end gap-2 border-top pt-3 mt-4">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="submit" class="btn btn-primary-custom">Importar Archivo</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>